<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>File Source for LoggerPatternLayout.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						<h1>Source for file LoggerPatternLayout.php</h1>
<p>Documentation is available at <a href="../log4php/layouts/_log4php_layouts_LoggerPatternLayout_php.html">LoggerPatternLayout.php</a></p>
<div class="src-code">
<pre><a name="a1"></a><br />1     <span class="src-php">&lt;?php</span><a name="a2"></a><br />2     <span class="src-doc">/**</span><a name="a3"></a><br />3     <span class="src-doc"> * log4php is a PHP port of the log4j java logging package.</span><a name="a4"></a><br />4     <span class="src-doc"> * </span><a name="a5"></a><br />5     <span class="src-doc"> * &lt;p&gt;This framework is based on log4j (see </span><span class="src-doc-inlinetag">{@link http://jakarta.apache.org/log4j log4j}</span><span class="src-doc"> for details).&lt;/p&gt;</span><a name="a6"></a><br />6     <span class="src-doc"> * &lt;p&gt;Design, strategies and part of the methods documentation are developed by log4j team</span><a name="a7"></a><br />7     <span class="src-doc"> * (Ceki Gülcü as log4j project founder and</span><a name="a8"></a><br />8     <span class="src-doc"> * </span><span class="src-doc-inlinetag">{@link http://jakarta.apache.org/log4j/docs/contributors.html contributors}</span><span class="src-doc">).&lt;/p&gt;</span><a name="a9"></a><br />9     <span class="src-doc"> *</span><a name="a10"></a><br />10    <span class="src-doc"> * &lt;p&gt;PHP port, extensions and modifications by VxR. All rights reserved.&lt;br&gt;</span><a name="a11"></a><br />11    <span class="src-doc"> * For more information, please see </span><span class="src-doc-inlinetag">{@link http://www.vxr.it/log4php/}</span><span class="src-doc">.&lt;/p&gt;</span><a name="a12"></a><br />12    <span class="src-doc"> *</span><a name="a13"></a><br />13    <span class="src-doc"> * &lt;p&gt;This software is published under the terms of the LGPL License</span><a name="a14"></a><br />14    <span class="src-doc"> * a copy of which has been included with this distribution in the LICENSE file.&lt;/p&gt;</span><a name="a15"></a><br />15    <span class="src-doc"> * </span><a name="a16"></a><br />16    <span class="src-doc"> *</span><span class="src-doc"> </span><span class="src-doc-coretag">@package</span><span class="src-doc"> log4php</span><a name="a17"></a><br />17    <span class="src-doc"> *</span><span class="src-doc"> </span><span class="src-doc-coretag">@subpackage</span><span class="src-doc"> layouts</span><a name="a18"></a><br />18    <span class="src-doc"> */</span><a name="a19"></a><br />19    <a name="a20"></a><br />20    <span class="src-doc">/**</span><a name="a21"></a><br />21    <span class="src-doc"> *</span><span class="src-doc"> </span><span class="src-doc-coretag">@ignore</span><a name="a22"></a><br />22    <span class="src-doc"> */</span><a name="a23"></a><br />23    <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/defined">defined</a><span class="src-sym">(</span><span class="src-str">'LOG4PHP_DIR'</span><span class="src-sym">)</span><span class="src-sym">)</span> <a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'LOG4PHP_DIR'</span><span class="src-sym">,</span> <span class="src-id">dirname</span><span class="src-sym">(</span>__FILE__<span class="src-sym">)</span> . <span class="src-str">'/..'</span><span class="src-sym">)</span>;<a name="a24"></a><br />24     <a name="a25"></a><br />25    <span class="src-doc">/**</span><a name="a26"></a><br />26    <span class="src-doc"> */</span><a name="a27"></a><br />27    <span class="src-inc">require_once</span><span class="src-sym">(</span><span class="src-id">LOG4PHP_DIR</span> . <span class="src-str">'/helpers/LoggerPatternParser.php'</span><span class="src-sym">)</span>;<a name="a28"></a><br />28    <span class="src-inc">require_once</span><span class="src-sym">(</span><span class="src-id">LOG4PHP_DIR</span> . <span class="src-str">'/LoggerLayout.php'</span><span class="src-sym">)</span>;<a name="a29"></a><br />29    <span class="src-inc">require_once</span><span class="src-sym">(</span><span class="src-id">LOG4PHP_DIR</span> . <span class="src-str">'/LoggerLog.php'</span><span class="src-sym">)</span>;<a name="a30"></a><br />30    <a name="a31"></a><br />31    <span class="src-doc">/**</span><a name="a32"></a><br />32    <span class="src-doc"> * Default conversion Pattern</span><a name="a33"></a><br />33    <span class="src-doc"> */</span><a name="a34"></a><br />34    <a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'LOG4PHP_LOGGER_PATTERN_LAYOUT_DEFAULT_CONVERSION_PATTERN'</span><span class="src-sym">,</span> <span class="src-str">'%m%n'</span><span class="src-sym">)</span>;<a name="a35"></a><br />35    <a name="a36"></a><br />36    <a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'LOG4PHP_LOGGER_PATTERN_LAYOUT_TTCC_CONVERSION_PATTERN'</span><span class="src-sym">,</span>    <span class="src-str">'%r [%t] %p %c %x - %m%n'</span><span class="src-sym">)</span>;<a name="a37"></a><br />37    <a name="a38"></a><br />38    <span class="src-doc">/**</span><a name="a39"></a><br />39    <span class="src-doc"> * A flexible layout configurable with pattern string.</span><a name="a40"></a><br />40    <span class="src-doc"> * </span><a name="a41"></a><br />41    <span class="src-doc"> * &lt;p&gt;The goal of this class is to </span><span class="src-doc-inlinetag">{@link format()}</span><span class="src-doc"> a </span><span class="src-doc-inlinetag">{@link LoggerLoggingEvent}</span><span class="src-doc"> and return the results as a string.</span><a name="a42"></a><br />42    <span class="src-doc"> * The results depend on the conversion pattern.</span><a name="a43"></a><br />43    <span class="src-doc"> * The conversion pattern is closely related to the conversion pattern of the printf function in C.</span><a name="a44"></a><br />44    <span class="src-doc"> * A conversion pattern is composed of literal text and format control expressions called conversion specifiers.</span><a name="a45"></a><br />45    <span class="src-doc"> * You are free to insert any literal text within the conversion pattern.&lt;/p&gt;</span><a name="a46"></a><br />46    <span class="src-doc"> *</span><a name="a47"></a><br />47    <span class="src-doc"> * &lt;p&gt;Each conversion specifier starts with a percent sign (%) and is followed by optional</span><a name="a48"></a><br />48    <span class="src-doc"> * format modifiers and a conversion character.&lt;/p&gt;</span><a name="a49"></a><br />49    <span class="src-doc"> * </span><a name="a50"></a><br />50    <span class="src-doc"> * &lt;p&gt;The conversion character specifies the type of data, e.g. category, priority, date, thread name.</span><a name="a51"></a><br />51    <span class="src-doc"> * The format modifiers control such things as field width, padding, left and right justification.&lt;/p&gt;</span><a name="a52"></a><br />52    <span class="src-doc"> * </span><a name="a53"></a><br />53    <span class="src-doc"> * The following is a simple example.</span><a name="a54"></a><br />54    <span class="src-doc"> * </span><a name="a55"></a><br />55    <span class="src-doc"> * &lt;p&gt;Let the conversion pattern be &quot;%-5p [%t]: %m%n&quot; and assume that the log4php environment</span><a name="a56"></a><br />56    <span class="src-doc"> * was set to use a LoggerPatternLayout.&lt;/p&gt;</span><a name="a57"></a><br />57    <span class="src-doc"> * </span><a name="a58"></a><br />58    <span class="src-doc"> * Then the statements</span><a name="a59"></a><br />59    <span class="src-doc"> * &lt;code&gt;</span><a name="a60"></a><br />60    <span class="src-doc"> *  $root =&amp; LoggerManager::getRoot();</span><a name="a61"></a><br />61    <span class="src-doc"> *  $root-&gt;debug(&quot;Message 1&quot;);</span><a name="a62"></a><br />62    <span class="src-doc"> *  $root-&gt;warn(&quot;Message 2&quot;);</span><a name="a63"></a><br />63    <span class="src-doc"> * &lt;/code&gt;</span><a name="a64"></a><br />64    <span class="src-doc"> * would yield the output</span><a name="a65"></a><br />65    <span class="src-doc"> * &lt;pre&gt;</span><a name="a66"></a><br />66    <span class="src-doc"> *  DEBUG [main]: Message 1</span><a name="a67"></a><br />67    <span class="src-doc"> *  WARN  [main]: Message 2</span><a name="a68"></a><br />68    <span class="src-doc"> * &lt;/pre&gt;</span><a name="a69"></a><br />69    <span class="src-doc"> * </span><a name="a70"></a><br />70    <span class="src-doc"> * &lt;p&gt;Note that there is no explicit separator between text and conversion specifiers.&lt;/p&gt;</span><a name="a71"></a><br />71    <span class="src-doc"> * </span><a name="a72"></a><br />72    <span class="src-doc"> * &lt;p&gt;The pattern parser knows when it has reached the end of a conversion specifier when it reads a conversion character.</span><a name="a73"></a><br />73    <span class="src-doc"> * In the example above the conversion specifier %-5p means the priority of the logging event should be</span><a name="a74"></a><br />74    <span class="src-doc"> * left justified to a width of five characters.&lt;/p&gt;</span><a name="a75"></a><br />75    <span class="src-doc"> *</span><a name="a76"></a><br />76    <span class="src-doc"> * Not all log4j conversion characters are implemented. The recognized conversion characters are:</span><a name="a77"></a><br />77    <span class="src-doc"> * - &lt;b&gt;c&lt;/b&gt; Used to output the category of the logging event. The category conversion specifier can be optionally followed by precision specifier, that is a decimal constant in brackets.</span><a name="a78"></a><br />78    <span class="src-doc"> *         If a precision specifier is given, then only the corresponding number of right most components of the category name will be printed.</span><a name="a79"></a><br />79    <span class="src-doc"> *         By default the category name is printed in full.</span><a name="a80"></a><br />80    <span class="src-doc"> *         For example, for the category name &quot;a.b.c&quot; the pattern %c{2} will output &quot;b.c&quot;.</span><a name="a81"></a><br />81    <span class="src-doc"> * - &lt;b&gt;C&lt;/b&gt; Used to output the fully qualified class name of the caller issuing the logging request.</span><a name="a82"></a><br />82    <span class="src-doc"> *         This conversion specifier can be optionally followed by precision specifier, that is a decimal constant in brackets.</span><a name="a83"></a><br />83    <span class="src-doc"> *         If a precision specifier is given, then only the corresponding number of right most components of the class name will be printed.</span><a name="a84"></a><br />84    <span class="src-doc"> *         By default the class name is output in fully qualified form.</span><a name="a85"></a><br />85    <span class="src-doc"> *         For example, for the class name &quot;org.apache.xyz.SomeClass&quot;, the pattern %C{1} will output &quot;SomeClass&quot;.</span><a name="a86"></a><br />86    <span class="src-doc"> * - &lt;b&gt;d&lt;/b&gt; Used to output the date of the logging event.</span><a name="a87"></a><br />87    <span class="src-doc"> *         The date conversion specifier may be followed by a date format specifier enclosed between braces.</span><a name="a88"></a><br />88    <span class="src-doc"> *         The format specifier follows the </span><span class="src-doc-inlinetag">{@link PHP_MANUAL#date}</span><span class="src-doc"> function.</span><a name="a89"></a><br />89    <span class="src-doc"> *         Note that the special character &lt;b&gt;u&lt;/b&gt; is used to as microseconds replacement (to avoid replacement,</span><a name="a90"></a><br />90    <span class="src-doc"> *         use &lt;b&gt;\u&lt;/b&gt;).</span><a name="a91"></a><br />91    <span class="src-doc"> *         For example, %d{H:i:s,u} or %d{d M Y H:i:s,u}. If no date format specifier is given then ISO8601 format is assumed.</span><a name="a92"></a><br />92    <span class="src-doc"> *         The date format specifier admits the same syntax as the time pattern string of the SimpleDateFormat.</span><a name="a93"></a><br />93    <span class="src-doc"> *         It is recommended to use the predefined log4php date formatters.</span><a name="a94"></a><br />94    <span class="src-doc"> *         These can be specified using one of the strings &quot;ABSOLUTE&quot;, &quot;DATE&quot; and &quot;ISO8601&quot; for specifying</span><a name="a95"></a><br />95    <span class="src-doc"> *         AbsoluteTimeDateFormat, DateTimeDateFormat and respectively ISO8601DateFormat.</span><a name="a96"></a><br />96    <span class="src-doc"> *         For example, %d{ISO8601} or %d{ABSOLUTE}.</span><a name="a97"></a><br />97    <span class="src-doc"> * - &lt;b&gt;F&lt;/b&gt; Used to output the file name where the logging request was issued.</span><a name="a98"></a><br />98    <span class="src-doc"> * - &lt;b&gt;l&lt;/b&gt; Used to output location information of the caller which generated the logging event.</span><a name="a99"></a><br />99    <span class="src-doc"> * - &lt;b&gt;L&lt;/b&gt; Used to output the line number from where the logging request was issued.</span><a name="a100"></a><br />100   <span class="src-doc"> * - &lt;b&gt;m&lt;/b&gt; Used to output the application supplied message associated with the logging event.</span><a name="a101"></a><br />101   <span class="src-doc"> * - &lt;b&gt;M&lt;/b&gt; Used to output the method name where the logging request was issued.</span><a name="a102"></a><br />102   <span class="src-doc"> * - &lt;b&gt;p&lt;/b&gt; Used to output the priority of the logging event.</span><a name="a103"></a><br />103   <span class="src-doc"> * - &lt;b&gt;r&lt;/b&gt; Used to output the number of milliseconds elapsed since the start of</span><a name="a104"></a><br />104   <span class="src-doc"> *            the application until the creation of the logging event.</span><a name="a105"></a><br />105   <span class="src-doc"> * - &lt;b&gt;t&lt;/b&gt; Used to output the name of the thread that generated the logging event.</span><a name="a106"></a><br />106   <span class="src-doc"> * - &lt;b&gt;x&lt;/b&gt; Used to output the NDC (nested diagnostic context) associated with</span><a name="a107"></a><br />107   <span class="src-doc"> *            the thread that generated the logging event.</span><a name="a108"></a><br />108   <span class="src-doc"> * - &lt;b&gt;X&lt;/b&gt; Used to output the MDC (mapped diagnostic context) associated with</span><a name="a109"></a><br />109   <span class="src-doc"> *            the thread that generated the logging event.</span><a name="a110"></a><br />110   <span class="src-doc"> *            The X conversion character must be followed by the key for the map placed between braces,</span><a name="a111"></a><br />111   <span class="src-doc"> *            as in &lt;i&gt;%X{clientNumber}&lt;/i&gt; where clientNumber is the key.</span><a name="a112"></a><br />112   <span class="src-doc"> *            The value in the MDC corresponding to the key will be output.</span><a name="a113"></a><br />113   <span class="src-doc"> *            See </span><span class="src-doc-inlinetag">{@link LoggerMDC}</span><span class="src-doc"> class for more details.</span><a name="a114"></a><br />114   <span class="src-doc"> * - &lt;b&gt;%&lt;/b&gt; The sequence %% outputs a single percent sign.</span><a name="a115"></a><br />115   <span class="src-doc"> *</span><a name="a116"></a><br />116   <span class="src-doc"> * &lt;p&gt;By default the relevant information is output as is.</span><a name="a117"></a><br />117   <span class="src-doc"> *  However, with the aid of format modifiers it is possible to change the minimum field width,</span><a name="a118"></a><br />118   <span class="src-doc"> *  the maximum field width and justification.&lt;/p&gt;</span><a name="a119"></a><br />119   <span class="src-doc"> *</span><a name="a120"></a><br />120   <span class="src-doc"> * &lt;p&gt;The optional format modifier is placed between the percent sign and the conversion character.&lt;/p&gt;</span><a name="a121"></a><br />121   <span class="src-doc"> * &lt;p&gt;The first optional format modifier is the left justification flag which is just the minus (-) character.</span><a name="a122"></a><br />122   <span class="src-doc"> *  Then comes the optional minimum field width modifier.</span><a name="a123"></a><br />123   <span class="src-doc"> *  This is a decimal constant that represents the minimum number of characters to output.</span><a name="a124"></a><br />124   <span class="src-doc"> *  If the data item requires fewer characters, it is padded on either the left or the right until the minimum width is reached. The default is to pad on the left (right justify) but you can specify right padding with the left justification flag. The padding character is space. If the data item is larger than the minimum field width, the field is expanded to accommodate the data.</span><a name="a125"></a><br />125   <span class="src-doc"> *  The value is never truncated.&lt;/p&gt;</span><a name="a126"></a><br />126   <span class="src-doc"> * </span><a name="a127"></a><br />127   <span class="src-doc"> * &lt;p&gt;This behavior can be changed using the maximum field width modifier which is designated by a period</span><a name="a128"></a><br />128   <span class="src-doc"> *  followed by a decimal constant.</span><a name="a129"></a><br />129   <span class="src-doc"> *  If the data item is longer than the maximum field,</span><a name="a130"></a><br />130   <span class="src-doc"> *  then the extra characters are removed from the beginning of the data item and not from the end.</span><a name="a131"></a><br />131   <span class="src-doc"> *  For example, it the maximum field width is eight and the data item is ten characters long,</span><a name="a132"></a><br />132   <span class="src-doc"> *  then the first two characters of the data item are dropped.</span><a name="a133"></a><br />133   <span class="src-doc"> *  This behavior deviates from the printf function in C where truncation is done from the end.&lt;/p&gt;</span><a name="a134"></a><br />134   <span class="src-doc"> *</span><a name="a135"></a><br />135   <span class="src-doc"> * &lt;p&gt;Below are various format modifier examples for the category conversion specifier.&lt;/p&gt;</span><a name="a136"></a><br />136   <span class="src-doc"> * &lt;pre&gt;</span><a name="a137"></a><br />137   <span class="src-doc"> *   Format modifier  left justify  minimum width  maximum width  comment</span><a name="a138"></a><br />138   <span class="src-doc"> *   %20c             false         20             none           Left pad with spaces if the category name</span><a name="a139"></a><br />139   <span class="src-doc"> *                                                                is less than 20 characters long.</span><a name="a140"></a><br />140   <span class="src-doc"> *   %-20c            true          20             none           Right pad with spaces if the category name</span><a name="a141"></a><br />141   <span class="src-doc"> *                                                                is less than 20 characters long.</span><a name="a142"></a><br />142   <span class="src-doc"> *   %.30c            NA            none           30             Truncate from the beginning if the category name</span><a name="a143"></a><br />143   <span class="src-doc"> *                                                                is longer than 30 characters.</span><a name="a144"></a><br />144   <span class="src-doc"> *   %20.30c          false         20             30             Left pad with spaces if the category name</span><a name="a145"></a><br />145   <span class="src-doc"> *                                                                is shorter than 20 characters.</span><a name="a146"></a><br />146   <span class="src-doc"> *                                                                However, if category name is longer than 30 chars,</span><a name="a147"></a><br />147   <span class="src-doc"> *                                                                then truncate from the beginning.</span><a name="a148"></a><br />148   <span class="src-doc"> *   %-20.30c         true          20             30             Right pad with spaces if the category name is</span><a name="a149"></a><br />149   <span class="src-doc"> *                                                                shorter than 20 chars.</span><a name="a150"></a><br />150   <span class="src-doc"> *                                                                However, if category name is longer than 30 chars,</span><a name="a151"></a><br />151   <span class="src-doc"> *                                                                then truncate from the beginning.</span><a name="a152"></a><br />152   <span class="src-doc"> * &lt;/pre&gt;</span><a name="a153"></a><br />153   <span class="src-doc"> *</span><a name="a154"></a><br />154   <span class="src-doc"> *</span><span class="src-doc"> </span><span class="src-doc-coretag">@author</span><span class="src-doc"> VxR &lt;vxr@vxr.it&gt;</span><a name="a155"></a><br />155   <span class="src-doc"> *</span><span class="src-doc"> </span><span class="src-doc-coretag">@version</span><span class="src-doc"> $Revision: 1.7 $</span><a name="a156"></a><br />156   <span class="src-doc"> *</span><span class="src-doc"> </span><span class="src-doc-coretag">@package</span><span class="src-doc"> log4php</span><a name="a157"></a><br />157   <span class="src-doc"> *</span><span class="src-doc"> </span><span class="src-doc-coretag">@subpackage</span><span class="src-doc"> layouts</span><a name="a158"></a><br />158   <span class="src-doc"> *</span><span class="src-doc"> </span><span class="src-doc-coretag">@since</span><span class="src-doc"> 0.3</span><a name="a159"></a><br />159   <span class="src-doc"> */</span><a name="a160"></a><br />160   <span class="src-key">class</span> <a href="../log4php/layouts/LoggerPatternLayout.html">LoggerPatternLayout</a> <span class="src-key">extends</span> <a href="../log4php/LoggerLayout.html">LoggerLayout</a> <span class="src-sym">{</span><a name="a161"></a><br />161   <a name="a162"></a><br />162     <span class="src-doc">/**</span><a name="a163"></a><br />163   <span class="src-doc">   *</span><span class="src-doc"> </span><span class="src-doc-coretag">@var </span><span class="src-doc"></span><span class="src-doc-type">string </span><span class="src-doc"></span><span class="src-doc">output buffer appended to when format() is invoked</span><a name="a164"></a><br />164   <span class="src-doc">   */</span><a name="a165"></a><br />165     <span class="src-key">var</span> <a href="../log4php/layouts/LoggerPatternLayout.html#var$sbuf">$sbuf</a>;<a name="a166"></a><br />166   <a name="a167"></a><br />167     <span class="src-doc">/**</span><a name="a168"></a><br />168   <span class="src-doc">   *</span><span class="src-doc"> </span><span class="src-doc-coretag">@var </span><span class="src-doc"></span><span class="src-doc-type">string </span><a name="a169"></a><br />169   <span class="src-doc">   */</span><a name="a170"></a><br />170     <span class="src-key">var</span> <a href="../log4php/layouts/LoggerPatternLayout.html#var$pattern">$pattern</a>;<a name="a171"></a><br />171   <a name="a172"></a><br />172     <span class="src-doc">/**</span><a name="a173"></a><br />173   <span class="src-doc">   *</span><span class="src-doc"> </span><span class="src-doc-coretag">@var </span><span class="src-doc"></span><span class="src-doc-type">LoggerPatternConverter </span><span class="src-doc"></span><span class="src-doc">head chain</span><a name="a174"></a><br />174   <span class="src-doc">   */</span>   <a name="a175"></a><br />175     <span class="src-key">var</span> <a href="../log4php/layouts/LoggerPatternLayout.html#var$head">$head</a>;<a name="a176"></a><br />176   <a name="a177"></a><br />177     <span class="src-key">var</span> <a href="../log4php/layouts/LoggerPatternLayout.html#var$timezone">$timezone</a>;<a name="a178"></a><br />178   <a name="a179"></a><br />179       <span class="src-doc">/**</span><a name="a180"></a><br />180   <span class="src-doc">     * Constructs a PatternLayout using the</span><a name="a181"></a><br />181   <span class="src-doc">     * </span><span class="src-doc-inlinetag">{@link LOG4PHP_LOGGER_PATTERN_LAYOUT_DEFAULT_LAYOUT_PATTERN}</span><span class="src-doc">.</span><a name="a182"></a><br />182   <span class="src-doc">     * The default pattern just produces the application supplied message.</span><a name="a183"></a><br />183   <span class="src-doc">     */</span><a name="a184"></a><br />184       <span class="src-key">function</span> <a href="../log4php/layouts/LoggerPatternLayout.html#methodLoggerPatternLayout">LoggerPatternLayout</a><span class="src-sym">(</span><span class="src-var">$pattern</span> = <span class="src-id">null</span><span class="src-sym">)</span><a name="a185"></a><br />185       <span class="src-sym">{</span><a name="a186"></a><br />186           <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$pattern</span> === <span class="src-id">null</span><span class="src-sym">)</span> <span class="src-sym">{</span>    <a name="a187"></a><br />187               <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#methodLoggerPatternLayout">LoggerPatternLayout</a><span class="src-sym">(</span><span class="src-id"><a href="../log4php/layouts/_log4php_layouts_LoggerPatternLayout_php.html#defineLOG4PHP_LOGGER_PATTERN_LAYOUT_DEFAULT_CONVERSION_PATTERN">LOG4PHP_LOGGER_PATTERN_LAYOUT_DEFAULT_CONVERSION_PATTERN</a></span><span class="src-sym">)</span>;<a name="a188"></a><br />188           <span class="src-sym">}</span> <span class="src-key">else</span> <span class="src-sym">{</span><a name="a189"></a><br />189               <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$pattern">pattern</a> = <span class="src-var">$pattern</span>;<a name="a190"></a><br />190           <span class="src-sym">}</span>                <a name="a191"></a><br />191       <span class="src-sym">}</span><a name="a192"></a><br />192       <a name="a193"></a><br />193       <span class="src-doc">/**</span><a name="a194"></a><br />194   <span class="src-doc">     * Set the &lt;b&gt;ConversionPattern&lt;/b&gt; option. This is the string which</span><a name="a195"></a><br />195   <span class="src-doc">     * controls formatting and consists of a mix of literal content and</span><a name="a196"></a><br />196   <span class="src-doc">     * conversion specifiers.</span><a name="a197"></a><br />197   <span class="src-doc">     */</span><a name="a198"></a><br />198       <span class="src-key">function</span> <a href="../log4php/layouts/LoggerPatternLayout.html#methodsetConversionPattern">setConversionPattern</a><span class="src-sym">(</span><span class="src-var">$conversionPattern</span><span class="src-sym">)</span><a name="a199"></a><br />199       <span class="src-sym">{</span><a name="a200"></a><br />200           <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$pattern">pattern</a> = <span class="src-var">$conversionPattern</span>;<a name="a201"></a><br />201           <span class="src-var">$patternParser</span> = <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#methodcreatePatternParser">createPatternParser</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$pattern">pattern</a><span class="src-sym">)</span>;<a name="a202"></a><br />202           <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$head">head</a> = <span class="src-var">$patternParser</span><span class="src-sym">-&gt;</span><span class="src-id">parse</span><span class="src-sym">(</span><span class="src-sym">)</span>;<a name="a203"></a><br />203       <span class="src-sym">}</span><a name="a204"></a><br />204       <a name="a205"></a><br />205       <span class="src-doc">/**</span><a name="a206"></a><br />206   <span class="src-doc">     *</span><span class="src-doc"> </span><span class="src-doc-coretag">@return </span><span class="src-doc"></span><span class="src-doc-type">string </span><span class="src-doc"></span><span class="src-doc">Returns the value of the &lt;b&gt;ConversionPattern&lt;/b&gt; option.</span><a name="a207"></a><br />207   <span class="src-doc">     */</span><a name="a208"></a><br />208       <span class="src-key">function</span> <a href="../log4php/layouts/LoggerPatternLayout.html#methodgetConversionPattern">getConversionPattern</a><span class="src-sym">(</span><span class="src-sym">)</span><a name="a209"></a><br />209       <span class="src-sym">{</span><a name="a210"></a><br />210           <span class="src-key">return</span> <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$pattern">pattern</a>;<a name="a211"></a><br />211       <span class="src-sym">}</span><a name="a212"></a><br />212       <a name="a213"></a><br />213       <span class="src-doc">/**</span><a name="a214"></a><br />214   <span class="src-doc">     * Does not do anything as options become effective</span><a name="a215"></a><br />215   <span class="src-doc">     */</span><a name="a216"></a><br />216       <span class="src-key">function</span> <a href="../log4php/layouts/LoggerPatternLayout.html#methodactivateOptions">activateOptions</a><span class="src-sym">(</span><span class="src-sym">)</span><a name="a217"></a><br />217       <span class="src-sym">{</span><a name="a218"></a><br />218           <span class="src-comm">// nothing to do.</span><a name="a219"></a><br />219       <span class="src-sym">}</span><a name="a220"></a><br />220       <a name="a221"></a><br />221       <span class="src-key">function</span> <a href="../log4php/layouts/LoggerPatternLayout.html#methodignoresThrowable">ignoresThrowable</a><span class="src-sym">(</span><span class="src-sym">)</span> <a name="a222"></a><br />222       <span class="src-sym">{</span> <a name="a223"></a><br />223           <span class="src-key">return</span> <span class="src-id">true</span>; <a name="a224"></a><br />224       <span class="src-sym">}</span><a name="a225"></a><br />225       <a name="a226"></a><br />226       <span class="src-doc">/**</span><a name="a227"></a><br />227   <span class="src-doc">     * Returns LoggerPatternParser used to parse the conversion string. Subclasses</span><a name="a228"></a><br />228   <span class="src-doc">     * may override this to return a subclass of PatternParser which recognize</span><a name="a229"></a><br />229   <span class="src-doc">     * custom conversion characters.</span><a name="a230"></a><br />230   <span class="src-doc">     *</span><a name="a231"></a><br />231   <span class="src-doc">     *</span><span class="src-doc"> </span><span class="src-doc-coretag">@param </span><span class="src-doc"></span><span class="src-doc-type">string </span><span class="src-doc"></span><span class="src-doc-var">$pattern </span><a name="a232"></a><br />232   <span class="src-doc">     *</span><span class="src-doc"> </span><span class="src-doc-coretag">@return </span><span class="src-doc"></span><span class="src-doc-type">LoggerPatternParser </span><a name="a233"></a><br />233   <span class="src-doc">     */</span><a name="a234"></a><br />234       <span class="src-key">function</span> <a href="../log4php/layouts/LoggerPatternLayout.html#methodcreatePatternParser">createPatternParser</a><span class="src-sym">(</span><span class="src-var">$pattern</span><span class="src-sym">)</span><a name="a235"></a><br />235       <span class="src-sym">{</span><a name="a236"></a><br />236           <span class="src-key">return</span> <span class="src-key">new</span> <span class="src-id"><a href="../log4php/helpers/LoggerPatternParser.html">LoggerPatternParser</a></span><span class="src-sym">(</span><span class="src-var">$pattern</span><span class="src-sym">)</span>;<a name="a237"></a><br />237       <span class="src-sym">}</span><a name="a238"></a><br />238       <a name="a239"></a><br />239       <span class="src-doc">/**</span><a name="a240"></a><br />240   <span class="src-doc">     * Produces a formatted string as specified by the conversion pattern.</span><a name="a241"></a><br />241   <span class="src-doc">     *</span><a name="a242"></a><br />242   <span class="src-doc">     *</span><span class="src-doc"> </span><span class="src-doc-coretag">@param </span><span class="src-doc"></span><span class="src-doc-type">LoggerLoggingEvent </span><span class="src-doc"></span><span class="src-doc-var">$event </span><a name="a243"></a><br />243   <span class="src-doc">     *</span><span class="src-doc"> </span><span class="src-doc-coretag">@return </span><span class="src-doc"></span><span class="src-doc-type">string </span><a name="a244"></a><br />244   <span class="src-doc">     */</span><a name="a245"></a><br />245       <span class="src-key">function</span> <a href="../log4php/layouts/LoggerPatternLayout.html#methodformat">format</a><span class="src-sym">(</span><span class="src-var">$event</span><span class="src-sym">)</span><a name="a246"></a><br />246       <span class="src-sym">{</span><a name="a247"></a><br />247           <span class="src-id"><a href="../log4php/LoggerLog.html">LoggerLog</a></span><span class="src-sym">::</span><a href="../log4php/LoggerLog.html#methoddebug">debug</a><span class="src-sym">(</span><span class="src-str">&quot;LoggerPatternLayout::format()&quot;</span><span class="src-sym">)</span>;    <a name="a248"></a><br />248       <a name="a249"></a><br />249           <span class="src-comm">// Reset working stringbuffer</span><a name="a250"></a><br />250           <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$sbuf">sbuf</a> = <span class="src-str">''</span>;<a name="a251"></a><br />251           <span class="src-var">$c</span> = <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$head">head</a>;<a name="a252"></a><br />252           <span class="src-key">while</span><span class="src-sym">(</span><span class="src-var">$c</span> !== <span class="src-id">null</span><span class="src-sym">)</span> <span class="src-sym">{</span><a name="a253"></a><br />253               <span class="src-var">$c</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$sbuf">sbuf</a><span class="src-sym">,</span> <span class="src-var">$event</span><span class="src-sym">)</span>;<a name="a254"></a><br />254               <span class="src-var">$c</span> = <span class="src-var">$c</span><span class="src-sym">-&gt;</span><span class="src-id">next</span>;<a name="a255"></a><br />255           <span class="src-sym">}</span><a name="a256"></a><br />256           <span class="src-key">return</span> <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../log4php/layouts/LoggerPatternLayout.html#var$sbuf">sbuf</a>;<a name="a257"></a><br />257       <span class="src-sym">}</span><a name="a258"></a><br />258       <a name="a259"></a><br />259   <span class="src-sym">}</span><a name="a260"></a><br />260   <span class="src-php">?&gt;</span></pre>
</div>
	<p class="notes" id="credit">
		Documentation generated on Tue,  9 Dec 2003 23:49:41 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.2.2</a>
	</p>
	</body>
</html>